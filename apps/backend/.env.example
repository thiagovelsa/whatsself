# WhatsSelf Backend - Environment Configuration Template
# Copie para apps/backend/.env e ajuste conforme necessário

# =============================================================================
# Aplicação
# =============================================================================
NODE_ENV=development
PORT=3001
LOG_LEVEL=info
LOG_PRETTY=true
HTTP_REQUEST_TIMEOUT_MS=120000
HTTP_HEADERS_TIMEOUT_MS=125000
HTTP_KEEPALIVE_TIMEOUT_MS=60000
WHATSELF_LOG_MAX_FILES=10
WHATSELF_LOG_MAX_AGE_DAYS=7

# =============================================================================
# Banco de Dados (PostgreSQL recomendado)
# =============================================================================
DATABASE_URL=postgresql://postgres:postgrespassword@localhost:5432/whatsself?schema=public
DB_POOL_MAX=10
DB_POOL_TIMEOUT_MS=10000

# (Opcional) SQLite para uso local rǭpido - descomente e ajuste se preferir
# DATABASE_URL=file:./prisma/dev.db

# =============================================================================
# Segurança
# =============================================================================
JWT_SECRET=change-me-use-64-chars-in-production-000000000000000000000000
JWT_EXPIRES_IN=7d
DEFAULT_ADMIN_EMAIL=admin@whatsself.local
DEFAULT_ADMIN_PASSWORD=ChangeMe!123
CONFIG_CRYPTO_KEY=generate-a-random-32-byte-base64-key
API_CORS_ORIGIN=http://localhost:5173,http://127.0.0.1:5173

# =============================================================================
# WhatsApp
# =============================================================================
SKIP_WHATSAPP=false
WHATS_SESSION_PATH=../../data/whatsapp_session
PUPPETEER_HEADLESS=true
# PUPPETEER_EXECUTABLE_PATH=C:\Program Files\Google\Chrome\Application\chrome.exe

# =============================================================================
# Limites, Humanizador e Horário Comercial
# =============================================================================
RATE_MAX_PER_MIN=12
RATE_PER_CONTACT_PER_5MIN=2
BUSINESS_HOURS=09:00-18:00
TIMEZONE=America/Sao_Paulo
HUMANIZER_MIN_DELAY_MS=3000
HUMANIZER_MAX_DELAY_MS=7000
HUMANIZER_MIN_TYPING_MS=1500
HUMANIZER_MAX_TYPING_MS=3500

# =============================================================================
# Circuit Breaker
# =============================================================================
CB_WINDOW_MODE=5m_or_50
CB_MIN_ATTEMPTS=20
CB_FAIL_RATE_OPEN=0.25
CB_PROBE_INTERVAL_SEC=45
CB_PROBE_SUCCESS_CLOSE=0.9
CB_PROBE_SAMPLES=10
CB_COOLDOWN_INITIAL_SEC=300
CB_COOLDOWN_MAX_SEC=1800

# =============================================================================
# WebSocket (usa mesma porta da API por padrão)
# =============================================================================
WS_PORT=3001
WS_PATH=/socket.io

# =============================================================================
# Desenvolvimento
# =============================================================================
DEBUG=false
